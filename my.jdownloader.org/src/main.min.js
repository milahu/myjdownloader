$(document).ready(function(){

    var hideContextMenus = function () {
        var panels = $(".contextMenu");
        if (panels != null) {
            $.each(panels, function (index) {
                var gwtPanel =
                    $(this).closest('.gwt-PopupPanel').hide();
            });
        }
    };

    $("#webuiContent").on("click", ".gwt-Anchor", function (ev) {
        setTimeout(function () {
            var popupPanels = $(".gwt-PopupPanel");
            var panelCount = popupPanels != null ? popupPanels.length : 0;
            if (panelCount > 1) {
                var panel = $(popupPanels.get(panelCount - 1)).first();
                var contextMenu = panel.find(".contextMenu").first();
                var prevPanel = $(popupPanels.get(panelCount - 2)).first();
                var prevPanelContextMenu = prevPanel.find(".contextMenu").first();
                if (contextMenu != null && prevPanelContextMenu != null) {
                    var origY = ev.pageY;
                    var bodyHeight = document.body.clientHeight;
                    var bodyWidth = document.body.clientWidth;

                    var enoughYSpace = bodyHeight - ev.clientY > contextMenu.height();
                    var enoughXSpace = bodyWidth - ev.clientX > contextMenu.width();

                    var targetX = enoughXSpace ? (prevPanel.offset().left + prevPanelContextMenu.width() - 3) : (prevPanel.offset().left - contextMenu.width() + 3);
                    var targetY = enoughYSpace ? origY - 8 : origY - contextMenu.height() + 8;
                    panel.css({top: targetY + "px", left: targetX + "px"});
                }
            }
            popupPanels.show();
        }, 80);
    });
    $('#webuiContent').on('mousedown', '.selectionHeader', function (ev) {
        setTimeout(function () {
            var popupPanel = $(".gwt-PopupPanel");
            popupPanel.show();
            if (popupPanel != null && popupPanel[0] != null) {
                var contextMenu = popupPanel.find(".contextMenu").first();
                if (contextMenu != null) {
                    var origX = ev.pageX;
                    var origY = ev.pageY;

                    var bodyHeight = document.body.clientHeight;
                    var bodyWidth = document.body.clientWidth;

                    var enoughYSpace = bodyHeight - ev.clientY > popupPanel[0].offsetHeight;
                    var enoughXSpace = bodyWidth - ev.clientX > popupPanel[0].offsetWidth;

                    var targetX = enoughXSpace ? (origX) : (origX - popupPanel[0].offsetWidth);
                    var targetY = enoughYSpace ? (origY) : (origY - popupPanel[0].offsetHeight);

                    popupPanel.css({top: targetY + "px", left: targetX + "px"});
                }
            }
        }, 80);
    });

    $(window).scroll(function () {
        hideContextMenus();
    });

    $(window).resize(function () {
        hideContextMenus();
    });

    $('#webuiContent').bind('DOMNodeInserted', function (e) {
        var dialogs = $(e.target).find(".GHS0TFHLI");
        if (dialogs != null && dialogs.length > 0) {
            setTimeout(function () {
                var dialogContainer = dialogs.first().parent().parent().parent();
                var targetTop = (window.innerHeight / 2) - (dialogs.first().height() / 2);
                dialogContainer.css({position: "fixed", top: targetTop, margin: "unset"});
            }, 80);
        }
    });

    $('#webuiContent').on('mousedown', '.listRow', function(ev) {
        setTimeout(function () {
            var popupPanel = $(".gwt-PopupPanel");
            if (popupPanel != null && popupPanel[0] != null) {
                var origX = ev.pageX;
                var origY = ev.pageY;

                var bodyHeight = document.body.clientHeight;
                var bodyWidth = document.body.clientWidth;

                var enoughYSpace = bodyHeight - ev.clientY > popupPanel[0].offsetHeight;
                var enoughXSpace = bodyWidth - ev.clientX > popupPanel[0].offsetWidth;

                var targetX = enoughXSpace ? (origX) : (origX + document.body.scrollLeft - popupPanel[0].offsetWidth);
                var targetY = enoughYSpace ? (origY) : (origY + document.body.scrollTop - popupPanel[0].offsetHeight);

                popupPanel.css({top: targetY + "px", left: targetX + "px"});
                popupPanel.show();
            }
        }, 80);
    });var a=!1;$("#dropDownMenuButton").click(function(b){$("#dropDownMenu").toggle(),a=!a,a?($("#dropDownMenuButton .moreButtonImg").attr("src","./images/menu_dots_active.png"),$("#dropDownMenuButton").addClass("current")):($("#dropDownMenuButton .moreButtonImg").attr("src","./images/menu_dots.png"),$("#dropDownMenuButton").removeClass("current")),b.stopPropagation()}),$("body").click(function(){a&&($("#dropDownMenu").hide(),$("#dropDownMenuButton .moreButtonImg").attr("src","./images/menu_dots.png"),$("#dropDownMenuButton").removeClass("current"),a=!1)}),$("#premiumStatus").hide(),$("#freeStatus a").click(function(){$("#freeStatus").hide(),$("#premiumStatus").show()}),$("div#gwtAccountButton a").each(function(a,b){b.on("click",function(){$("#dropDownMenuButton .moreButtonImg").attr("src","./images/menu_dots.png"),$("#dropDownMenuButton").removeClass("current")})});var b=!1,c=function(a){a?($(".list-header").addClass("fixed-header"),$(".selection-header").addClass("fixed-header"),b=!0):($(".list-header").removeClass("fixed-header"),$(".selection-header").removeClass("fixed-header"),b=!1)};window.onscroll=function(){$("html").hasClass("no-touch")||($(window).scrollTop()>48&&!b?(c(!0),$(".list-heading-wrapper").addClass("scrolled")):$(window).scrollTop()<=48&&b&&(c(!1),$(".list-heading-wrapper").removeClass("scrolled"))),$(window).scrollTop()>0?$(".list-heading-wrapper").addClass("scrolled"):$(".list-heading-wrapper").removeClass("scrolled")}});
//# sourceMappingURL=sourcemap.map
